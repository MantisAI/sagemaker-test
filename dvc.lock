combine:
  cmd: python src/combine.py
  deps:
  - path: data/raw/data.tar.gz
    md5: 7c2ac02c03563afcf9b574c7e56c153a
  - path: src/combine.py
    md5: 123f58a2fa9138494d91d61920776155
  params:
    params.yaml:
      combine.label-mapping:
        pos: 1
        neg: 0
      common.all-data-path: data/intermediate/data.jsonl
      common.download-path: data/raw/data.tar.gz
  outs:
  - path: data/intermediate/data.jsonl
    md5: 20e701f351e9dc573fc209517418165e
prepare:
  cmd: python src/prepare.py
  deps:
  - path: data/intermediate/data.jsonl
    md5: 20e701f351e9dc573fc209517418165e
  - path: src/CNN.py
    md5: 3d3d557d75f40ccf4a703b4495dff3e6
  - path: src/prepare.py
    md5: a953127d4cc79f6f501a80fd49d75c3f
  params:
    params.yaml:
      common.processed-folder: data/processed
      prepare.data-path: data/intermediate/data.jsonl
      prepare.test-prop: 0.25
  outs:
  - path: data/processed/test.npz
    md5: 471a76fe49724da2d0a1013aaf0ce40a
  - path: data/processed/train.npz
    md5: 33fd0bfd3e166e07714f8ec067b9d439
  - path: models/indices.pickle
    md5: 01f6115d4b4f353f27398c82be791084
train:
  cmd: python src/train.py
  deps:
  - path: data/processed/test.npz
    md5: 471a76fe49724da2d0a1013aaf0ce40a
  - path: data/processed/train.npz
    md5: 33fd0bfd3e166e07714f8ec067b9d439
  - path: src/CNN.py
    md5: 3d3d557d75f40ccf4a703b4495dff3e6
  - path: src/local_run.py
    md5: 92692e6e4c4b0d48518e97accdb48b8e
  - path: src/train.py
    md5: 6419c78f3e9a9da4b0df2dd0059159e0
  params:
    params.yaml:
      common.processed-folder: data/processed
      train.batch-size: 1024
      train.checkpoint: true
      train.checkpoint-path: models
      train.embedding-dim: 50
      train.embedding-path: data/raw/glove.6B.50d.txt
      train.epochs: 2
      train.learning-rate: 0.01
      train.lowercase: true
      train.model-output-path: models
      train.num-words: 10000
      train.oov-token: <OOV>
      train.output-path: models
      train.padding-style: pre
      train.seq-length: 1000
      train.trunc-style: pre
  outs:
  - path: models/assets
    md5: d751713988987e9331980363e24189ce.dir
  - path: models/saved_model.pb
    md5: 0c8617a5dc042101cc3f6c7f3572023e
  - path: models/variables
    md5: 9de71a077f97349bcbdd4492173df45a.dir
download:
  cmd: python src/download.py
  deps:
  - path: src/download.py
    md5: 20add3d649bf80b1d933c0ee547e8ee4
  params:
    params.yaml:
      common.download-path: data/raw/data.tar.gz
      download.data-url: http://ai.stanford.edu/~amaas/data/sentiment/aclImdb_v1.tar.gz
  outs:
  - path: data/raw/data.tar.gz
    md5: 7c2ac02c03563afcf9b574c7e56c153a
